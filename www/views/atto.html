
<div class="profilo_deputato" >
    <img src="{{deputato_full.img.value}}" alt="{{deputato_full.cognome.value}} {{deputato_full.nome.value}}"> <br />
    Nome: {{deputato_full.nome.value}} <br />
    Cognome: {{deputato_full.cognome.value}} <br />
    Data di nascita: {{deputato_full.dataNascita.value}} <br />
    Luogo di nascita: {{deputato_full.luogoNascita .value}} <br />
    <div style="white-space: pre-line ;">Commissione: {{deputato_full.commissione.value}} </div>
    Sesso: {{deputato_full.categoryY.value}} <br />
    Partito: {{deputato_full.categoryX.value}} <br />
    <div ng-show="deputato_full.twitter.value">
        Twitter : <a href="{{deputato_full.twitter.value}}">LINK</a>
    </div>
    <div ng-show="deputato_full.facebook.value">
        Facebook: <a href="{{deputato_full.facebook.value}}">LINK</a>
    </div>
    <div ng-show="deputato_full.youtube.value">
        YouTube: <a href="{{deputato_full.youtube.value}}">LINK</a>
    </div>
</div>

<div class="column1">
    <h2>Atto - {{atto_count}}</h2>
    <div class="scrollable">
        <ul ng-repeat="row in atto_result">
            <li><a ng-href="{{row.atto.value}}">{{row.nomeAtto.value}}</a></li>
        </ul>
    </div>
</div>

<div class="column1">
    <h2>Atti di indirizzo e controllo - {{aic_count}}</h2>
    <div class="scrollable">
        <ul ng-repeat="row in aic_result">
            <li><a ng-href="{{row.aic.value}}">{{row.title.value}}</a></li>
        </ul>
    </div>
</div>

<div class="column1">
    <h2>Interventi - {{intervento_count}}</h2>
    <div class="scrollable">
        <ul ng-repeat="row in intervento_result">
            <li><a ng-href="{{row.intervento.value}}">{{row.interventoRif.value}}</a></li>
        </ul>
    </div>
</div>

<div class="column1">
    <h2>Leggi - {{leggi_result.length}}</h2>
    <div class="scrollable">
        <ul ng-repeat="row in leggi_result">
            <li><a ng-href="{{row.legge.value}}">{{row.nomeAtto.value}}</a></li>
        </ul>
    </div>
</div>

<script id="select_atto" type="text/ng-template">
SELECT
    distinct *
WHERE {
    OPTIONAL {
        ?atto ocd:primo_firmatario <{{deputato}}> .
        ?atto a ocd:atto .
    }
    OPTIONAL {
        ?atto ocd:altro_firmatario <{{deputato}}> .
        ?atto a ocd:atto .
    }
    ?atto dc:title ?nomeAtto
}
</script>

<script id="select_aic" type="text/ng-template">
SELECT
    distinct *
WHERE {
    OPTIONAL {
        ?aic ocd:primo_firmatario <{{deputato}}> .
        ?aic a ocd:aic
    }
    OPTIONAL {
        ?aic ocd:altro_firmatario <{{deputato}}> .
        ?aic a ocd:aic
    }
    ?aic dc:title ?title .
    ?aic dc:description ?descrizione
}
</script>

<script id="select_intervento" type="text/ng-template">
SELECT
    distinct *
WHERE {
    OPTIONAL {
        ?intervento ocd:rif_deputato <{{deputato}}> .
        ?intervento a ocd:intervento
    }
    ?intervento dc:title ?interventoRif
}
</script>

<script  id="select_legge" type="text/ng-template">
SELECT DISTINCT *
WHERE {
    ?atto a ocd:atto .
    {
        {
            ?atto ocd:primo_firmatario <{{deputato}}>
        }
        UNION
        {
            ?atto ocd:altro_firmatario <{{deputato}}>
        }
        <{{deputato}}> a ocd:deputato
    }
    ?atto dc:title ?nomeAtto .
    ?atto dc:description ?descrizioneAtto .
    ?legge a ocd:legge; ocd:rif_leg <{{legislatura_uri}}> .
    ?legge ocd:lavoriPreparatori [?lavoro ?atto]
}
</script>

<script  id="select_bio" type="text/ng-template">
SELECT DISTINCT
    <{{deputato}}> ?nome ?cognome ?dataNascita ?luogoNascita ?commissione ?img ?categoryY ?categoryX ?twitter ?facebook ?youtube
WHERE {
    <{{deputato}}> a ocd:deputato;
    foaf:firstName ?nome; foaf:surname ?cognome; foaf:gender ?categoryY;
    foaf:depiction ?img; ocd:rif_leg <{{legislatura_uri}}>; ocd:rif_mandatoCamera ?mandato .

            ?persona ocd:rif_mandatoCamera ?mandato; a foaf:Person. ?mandato ocd:rif_elezione ?elezione .

            FILTER NOT EXISTS{ ?mandato ocd:endDate ?date }

    <{{deputato}}> ocd:aderisce ?aderisce.

            OPTIONAL{
            ?persona <http://purl.org/vocab/bio/0.1/Birth> ?nascita .
            ?nascita <http://purl.org/vocab/bio/0.1/date> ?dataNascita; ocd:rif_luogo ?luogoNascitaUri .
                    ?luogoNascitaUri dc:title ?luogoNascita.
    }

    ?aderisce ocd:rif_gruppoParlamentare ?gruppo .
            ?gruppo <http://purl.org/dc/terms/alternative> ?categoryX .
            MINUS{
            ?aderisce ocd:endDate ?fineAdesione
    }

    <{{deputato}}> ocd:membro ?membro .
    ?membro ocd:rif_organo ?organo .
    ?organo dc:title ?commissione .

    MINUS{
        ?membro ocd:endDate ?fineMembership
    }

    OPTIONAL{
        ?persona foaf:account ?accountTw .
        ?accountTw foaf:accountServiceHomepage ?twitter .
        FILTER(REGEX(STR(?twitter),'twitter.com'))
    }

    OPTIONAL{
        ?persona foaf:account ?accountFb .
                ?accountFb foaf:accountServiceHomepage ?facebook .
                FILTER(REGEX(STR(?facebook),'facebook.com'))
    }

    OPTIONAL{
        ?persona foaf:account ?accountYt .
                ?accountYt foaf:accountServiceHomepage ?youtube .
                FILTER(REGEX(STR(?youtube),'youtube.com'))
    }
}
</script>